{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { useToasts } from \"react-toast-notifications\";\nimport { useCart } from \"../../src/context/cart\";\nimport { REMOVE_ITEM } from \"../../src/graphql/schema.graphql\";\nimport Icon from \"../../components/Icon/Icon\";\nimport { Container, padding } from \"../../styles\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { Wrap, Row, PaymentActions, PriceColumn } from \"./Checkout.styles\";\nimport Link from \"next/link\";\nimport { formatCurrency } from \"../../helpers/formatting\";\n\nvar Checkout = function Checkout() {\n  var _useCart = useCart(),\n      cartContent = _useCart.cartContent,\n      setCartResponse = _useCart.setCartResponse;\n\n  var displayEmpty = !cartContent || cartContent.lineItems.edges.length === 0;\n\n  var _useToasts = useToasts(),\n      addToast = _useToasts.addToast;\n\n  if (displayEmpty) {\n    return __jsx(Container, null, __jsx(\"div\", {\n      style: {\n        margin: \"\".concat(padding.xxl, \" 0 \").concat(padding.xl)\n      }\n    }, __jsx(\"h1\", {\n      className: \"section-title\"\n    }, __jsx(\"span\", null, \"Uw winkelmandje\")), __jsx(\"div\", {\n      className: \"flex flex-center\",\n      style: {\n        opacity: \"0.5\",\n        marginTop: \"2em\"\n      }\n    }, __jsx(\"h2\", null, \"U heeft nog niks in uw mandje.\"))));\n  }\n\n  var lineItems = cartContent.lineItems,\n      checkoutId = cartContent.id;\n\n  var _useMutation = useMutation(REMOVE_ITEM),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      removeItem = _useMutation2[0];\n\n  var handleDeleteClick = function handleDeleteClick(_ref) {\n    var id = _ref.id,\n        title = _ref.title;\n    removeItem({\n      variables: {\n        checkoutId: checkoutId,\n        lineItemIds: [id]\n      }\n    }).then(function (res) {\n      return res;\n    }).then(function (_ref2) {\n      var data = _ref2.data;\n      setCartResponse(data.checkoutLineItemsRemove.checkout);\n    }).then(function () {\n      addToast(\"\".concat(title, \" succesvol verwijderd!\"), {\n        appearance: \"success\",\n        autoDismiss: true\n      });\n    });\n  };\n\n  var handlePaymentClick = function handlePaymentClick() {\n    window.open(cartContent.webUrl, \"_blank\");\n  };\n\n  return __jsx(Container, null, __jsx(\"div\", {\n    style: {\n      margin: \"\".concat(padding.xxl, \" 0 \").concat(padding.xl)\n    }\n  }, __jsx(\"h1\", {\n    className: \"section-title\"\n  }, __jsx(\"span\", null, \"Uw winkelmandje\")), __jsx(Wrap, null, lineItems.edges.map(function (_ref3) {\n    var node = _ref3.node;\n    var handle = node.variant.product.handle;\n    var hasVariant = false;\n    return __jsx(Row, {\n      className: \"flex\",\n      key: node.id\n    }, __jsx(\"div\", {\n      className: \"thumbnail\"\n    }, __jsx(\"div\", {\n      style: {\n        backgroundImage: \"url(\".concat(node.variant.image.originalSrc, \")\")\n      }\n    })), __jsx(\"div\", {\n      className: \"row-content\"\n    }, __jsx(Link, {\n      href: \"/product/[pid]\",\n      as: \"/product/\".concat(handle)\n    }, __jsx(React.Fragment, null, __jsx(\"a\", null, __jsx(\"div\", {\n      className: \"text-content flex\"\n    }, __jsx(\"h3\", null, node.title), hasVariant && __jsx(\"p\", null, node.variant.selectedOptions[0].name, \":\", \" \", __jsx(\"strong\", null, node.variant.selectedOptions[0].value)), __jsx(\"p\", null, \"Aantal: \", node.quantity)), __jsx(\"div\", {\n      className: \"actions\"\n    }, __jsx(\"button\", {\n      onClick: function onClick() {\n        return handleDeleteClick(node);\n      },\n      className: \"remove-button btn-secondary\"\n    }, __jsx(Icon, {\n      type: \"trash-can\",\n      fill: \"red\",\n      className: \"remove-icon\"\n    }), \"Verwijder\"))))), __jsx(\"div\", {\n      className: \"price\"\n    }, __jsx(\"h4\", null, formatCurrency(node.variant.priceV2.amount)))));\n  })), !displayEmpty && __jsx(React.Fragment, null, __jsx(PriceColumn, null, __jsx(\"p\", null, \"Subtotaal:\", \" \", __jsx(\"span\", null, formatCurrency(cartContent.subtotalPriceV2.amount))), __jsx(\"hr\", null), __jsx(\"p\", null, \"Totaal:\", \" \", __jsx(\"span\", null, formatCurrency(cartContent.totalPriceV2.amount)))), __jsx(PaymentActions, null, __jsx(\"div\", null, __jsx(\"button\", {\n    onClick: handlePaymentClick,\n    className: \"btn-primary\"\n  }, \"Doorgaan naar afrekenen\"), __jsx(\"p\", {\n    style: {\n      fontSize: \"0.6rem\",\n      opacity: 0.5\n    }\n  }, \"Dit opent een nieuw tabblad in uw browser.\"))))));\n};\n\nexport default Checkout;","map":null,"metadata":{},"sourceType":"module"}