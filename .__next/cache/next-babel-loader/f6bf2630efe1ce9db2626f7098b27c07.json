{"ast":null,"code":"import { ApolloClient } from \"apollo-client\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { HttpLink } from \"apollo-link-http\";\nimport fetch from \"isomorphic-unfetch\";\nexport default function createApolloClient(initialState, ctx) {\n  // The `ctx` (NextPageContext) will only be present on the server.\n  // use it to extract auth headers (ctx.req) or similar.\n  return new ApolloClient({\n    ssrMode: Boolean(ctx),\n    link: new HttpLink({\n      uri: process.env.NEXT_PUBLIC_SHOPIFY_ACCESS_URL,\n      credentials: \"same-origin\",\n      // Additional fetch() options like `credentials` or `headers`\n      headers: {\n        Accept: \"application/json\",\n        \"X-Shopify-Storefront-Access-Token\": process.env.NEXT_PUBLIC_SHOPIFY_ACCESS_TOKEN\n      }\n    }),\n    cache: new InMemoryCache().restore(initialState)\n  });\n}","map":{"version":3,"sources":["/Users/diederik/Projects/next-2-span/layouts/main/helpers/apolloClient.js"],"names":["ApolloClient","InMemoryCache","HttpLink","fetch","createApolloClient","initialState","ctx","ssrMode","Boolean","link","uri","process","env","NEXT_PUBLIC_SHOPIFY_ACCESS_URL","credentials","headers","Accept","NEXT_PUBLIC_SHOPIFY_ACCESS_TOKEN","cache","restore"],"mappings":"AAAA,SAASA,YAAT,QAA6B,eAA7B;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AAEA,eAAe,SAASC,kBAAT,CAA4BC,YAA5B,EAA0CC,GAA1C,EAA+C;AAC5D;AACA;AACA,SAAO,IAAIN,YAAJ,CAAiB;AACtBO,IAAAA,OAAO,EAAEC,OAAO,CAACF,GAAD,CADM;AAEtBG,IAAAA,IAAI,EAAE,IAAIP,QAAJ,CAAa;AACjBQ,MAAAA,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,8BADA;AAEjBC,MAAAA,WAAW,EAAE,aAFI;AAEW;AAC5BC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEP,6CACEL,OAAO,CAACC,GAAR,CAAYK;AAHP;AAHQ,KAAb,CAFgB;AAWtBC,IAAAA,KAAK,EAAE,IAAIjB,aAAJ,GAAoBkB,OAApB,CAA4Bd,YAA5B;AAXe,GAAjB,CAAP;AAaD","sourcesContent":["import { ApolloClient } from \"apollo-client\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { HttpLink } from \"apollo-link-http\";\nimport fetch from \"isomorphic-unfetch\";\n\nexport default function createApolloClient(initialState, ctx) {\n  // The `ctx` (NextPageContext) will only be present on the server.\n  // use it to extract auth headers (ctx.req) or similar.\n  return new ApolloClient({\n    ssrMode: Boolean(ctx),\n    link: new HttpLink({\n      uri: process.env.NEXT_PUBLIC_SHOPIFY_ACCESS_URL,\n      credentials: \"same-origin\", // Additional fetch() options like `credentials` or `headers`\n      headers: {\n        Accept: \"application/json\",\n        \"X-Shopify-Storefront-Access-Token\":\n          process.env.NEXT_PUBLIC_SHOPIFY_ACCESS_TOKEN,\n      },\n    }),\n    cache: new InMemoryCache().restore(initialState),\n  });\n}\n"]},"metadata":{},"sourceType":"module"}