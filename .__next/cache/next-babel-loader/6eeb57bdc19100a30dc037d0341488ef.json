{"ast":null,"code":"var __jsx = React.createElement;\nimport React from \"react\";\nimport { useToasts } from \"react-toast-notifications\";\nimport { useCart } from \"../../src/context/cart\";\nimport { REMOVE_ITEM } from \"../../src/graphql/schema.graphql\";\nimport Icon from \"../../components/Icon/Icon\";\nimport { Container, padding } from \"../../styles\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { Wrap, Row, PaymentActions, PriceColumn } from \"./Checkout.styles\";\nimport Link from \"next/link\";\nimport { formatCurrency } from \"../../helpers/formatting\";\n\nconst Checkout = () => {\n  const {\n    cartContent,\n    setCartResponse\n  } = useCart();\n  const displayEmpty = !cartContent || cartContent.lineItems.edges.length === 0;\n  const {\n    addToast\n  } = useToasts();\n\n  if (displayEmpty) {\n    return __jsx(Container, null, __jsx(\"div\", {\n      style: {\n        margin: `${padding.xxl} 0 ${padding.xl}`\n      }\n    }, __jsx(\"h1\", {\n      className: \"section-title\"\n    }, __jsx(\"span\", null, \"Uw winkelmandje\")), __jsx(\"p\", null, \"U heeft nog niks in uw mandje.\")));\n  }\n\n  const {\n    lineItems,\n    id: checkoutId\n  } = cartContent;\n  console.log(cartContent);\n  const [removeItem] = useMutation(REMOVE_ITEM);\n\n  const handleDeleteClick = ({\n    id,\n    title\n  }) => {\n    removeItem({\n      variables: {\n        checkoutId,\n        lineItemIds: [id]\n      }\n    }).then(res => res).then(({\n      data\n    }) => {\n      setCartResponse(data.checkoutLineItemsRemove.checkout);\n    }).then(() => {\n      addToast(`${title} succesvol verwijderd!`, {\n        appearance: \"success\",\n        autoDismiss: true\n      });\n    });\n  };\n\n  const handlePaymentClick = () => {\n    window.open(cartContent.webUrl, \"_blank\");\n  };\n\n  return __jsx(Container, null, __jsx(\"div\", {\n    style: {\n      margin: `${padding.xxl} 0 ${padding.xl}`\n    }\n  }, __jsx(\"h1\", {\n    className: \"section-title\"\n  }, __jsx(\"span\", null, \"Uw winkelmandje\")), __jsx(Wrap, null, lineItems.edges.map(({\n    node\n  }) => {\n    const {\n      handle\n    } = node.variant.product;\n    const hasVariant = false;\n    return __jsx(Row, {\n      className: \"flex\",\n      key: node.id\n    }, __jsx(\"div\", {\n      className: \"thumbnail\"\n    }, __jsx(\"div\", {\n      style: {\n        backgroundImage: `url(${node.variant.image.originalSrc})`\n      }\n    })), __jsx(\"div\", {\n      className: \"row-content\"\n    }, __jsx(Link, {\n      href: `/product/[pid]`,\n      as: `/product/${handle}`\n    }, __jsx(React.Fragment, null, __jsx(\"a\", null, __jsx(\"div\", {\n      className: \"text-content flex\"\n    }, __jsx(\"h3\", null, node.title), hasVariant && __jsx(\"p\", null, node.variant.selectedOptions[0].name, \":\", \" \", __jsx(\"strong\", null, node.variant.selectedOptions[0].value)), __jsx(\"p\", null, \"Aantal: \", node.quantity)), __jsx(\"div\", {\n      className: \"actions\"\n    }, __jsx(\"button\", {\n      onClick: () => handleDeleteClick(node),\n      className: \"remove-button btn-secondary\"\n    }, __jsx(Icon, {\n      type: \"trash-can\",\n      fill: \"red\",\n      className: \"remove-icon\"\n    }), \"Verwijder\"))))), __jsx(\"div\", {\n      className: \"price\"\n    }, __jsx(\"h4\", null, formatCurrency(node.variant.priceV2.amount)))));\n  })), !displayEmpty && __jsx(React.Fragment, null, __jsx(PriceColumn, null, __jsx(\"p\", null, \"Subtotaal:\", \" \", __jsx(\"span\", null, formatCurrency(cartContent.subtotalPriceV2.amount))), __jsx(\"hr\", null), __jsx(\"p\", null, \"Totaal:\", \" \", __jsx(\"span\", null, formatCurrency(cartContent.totalPriceV2.amount)))), __jsx(PaymentActions, null, __jsx(\"div\", null, __jsx(\"button\", {\n    onClick: handlePaymentClick,\n    className: \"btn-primary\"\n  }, \"Doorgaan naar afrekenen\"), __jsx(\"p\", {\n    style: {\n      fontSize: \"0.6rem\",\n      opacity: 0.5\n    }\n  }, \"Dit opent een nieuw tabblad in uw browser.\"))))));\n};\n\nexport default Checkout;","map":null,"metadata":{},"sourceType":"module"}